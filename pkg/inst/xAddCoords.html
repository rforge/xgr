<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for xAddCoords"><tr><td>xAddCoords</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>xAddCoords</h2>

<h3>Usage</h3>

<pre>
xAddCoords(g, node.attr = NULL, glayout = layout_with_kk,
edge.color.alternative = c("grey70", "grey95"), seed = 825, verbose =
TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>g</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>node.attr</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>glayout</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>edge.color.alternative</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>seed</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>


</td></tr>
</table>


<h3>Examples</h3>

<pre>
##---- Should be DIRECTLY executable !! ----
##-- ==&gt;  Define data, use random,
##--	or do  help(data=index)  for the standard data sets.

## The function is currently defined as
function (g, node.attr = NULL, glayout = layout_with_kk,
edge.color.alternative = c("grey70",
"grey95"), seed = 825, verbose = TRUE)
{
if (class(g) == "graphNEL") {
ig &lt;- igraph.from.graphNEL(g)
}
else {
ig &lt;- g
}
if (class(ig) != "igraph") {
stop("The function must apply to either 'igraph' or 'graphNEL'
object.\n")
}
node.attrs &lt;- igraph::vertex_attr_names(ig)
flag &lt;- F
if (is.null(node.attr)) {
flag &lt;- T
}
else if (!(node.attr %in% node.attrs)) {
flag &lt;- T
}
if (flag) {
message("The igraph object must have a vertex attribute of
interest.\n")
return(NULL)
}
if (verbose) {
now &lt;- Sys.time()
message(sprintf("The igraph object has %d nodes and %d edges (%s)
...",
vcount(ig), ecount(ig), as.character(now)), appendLF = T)
}
type &lt;- community &lt;- contribution &lt;- name &lt;- NULL
df_nodes &lt;- igraph::get.data.frame(ig, what = "vertices")
df_nodes$node.attr &lt;- df_nodes[, node.attr]
if (all(c("type", node.attr, "contribution") %in%
colnames(df_nodes))) {
df_nodes &lt;- df_nodes %&gt;% dplyr::arrange(type, node.attr,
-contribution)
}
else {
df_nodes &lt;- df_nodes %&gt;% dplyr::arrange(node.attr)
}
if (1) {
ls_tmp &lt;- split(x = df_nodes$name, f = df_nodes$node.attr)
ls_ig &lt;- lapply(ls_tmp, function(x) {
g &lt;- dnet::dNetInduce(ig, nodes_query = x, knn = 0,
largest.comp = TRUE)
})
if (1) {
layouts &lt;- lapply(ls_ig, glayout)
}
else {
layouts &lt;- lapply(ls_ig, function(g) {
igraph::layout_as_bipartite(g, types = as.logical(V(g)$type ==
"xnode"))
igraph::layout_in_circle(g)
igraph::layout_with_kk(g)
})
}
set.seed(seed)
glayout &lt;- igraph::merge_coords(ls_ig, layouts)
node.xcoord &lt;- glayout[, 1]
node.ycoord &lt;- glayout[, 2]
if (max(node.xcoord) != min(node.xcoord)) {
node.xcoord &lt;- (node.xcoord - min(node.xcoord))/(max(node.xcoord) -
min(node.xcoord)) * 2 - 1
}
if (max(node.ycoord) != min(node.ycoord)) {
node.ycoord &lt;- (node.ycoord - min(node.ycoord))/(max(node.ycoord) -
min(node.ycoord)) * 2 - 1
}
glayout &lt;- cbind(node.xcoord, node.ycoord)
g_tmp &lt;- igraph::disjoint_union(ls_ig)
ind &lt;- match(V(ig)$name, V(g_tmp)$name)
glayout &lt;- glayout[ind, ]
V(ig)$xcoord &lt;- glayout[, 1]
V(ig)$ycoord &lt;- glayout[, 2]
m &lt;- df_nodes$node.attr
names(m) &lt;- df_nodes$name
df_edges &lt;- igraph::get.data.frame(ig, what = "edges")
ind &lt;- match(df_edges$from, names(m))
m1 &lt;- m[ind]
ind &lt;- match(df_edges$to, names(m))
m2 &lt;- m[ind]
res &lt;- m1 != m2
if (!is.null(names(m1))) {
names(res) &lt;- paste(names(m1), names(m2), sep = "|")
}
if (length(edge.color.alternative) == 2) {
edge.color.alternative &lt;- edge.color.alternative
}
else {
edge.color.alternative &lt;- c("grey70", "grey95")
}
edge.color &lt;- edge.color.alternative[res + 1]
E(ig)$color &lt;- edge.color
}
invisible(ig)
}
</pre>


</body></html>
