<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for xPieplot"><tr><td>xPieplot</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>xPieplot</h2>

<h3>Usage</h3>

<pre>
xPieplot(df, columns, colormap = "ggplot2", pie.radius = NULL,
pie.color = "transparent", pie.color.alpha = 1, pie.thick = 0.1,
legend.title = "", gp = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>df</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>columns</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>colormap</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>pie.radius</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>pie.color</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>pie.color.alpha</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>pie.thick</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>legend.title</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>gp</code></td>
<td>


</td></tr>
</table>


<h3>Examples</h3>

<pre>
##---- Should be DIRECTLY executable !! ----
##-- ==&gt;  Define data, use random,
##--	or do  help(data=index)  for the standard data sets.

## The function is currently defined as
function (df, columns, colormap = "ggplot2", pie.radius = NULL,
pie.color = "transparent", pie.color.alpha = 1, pie.thick = 0.1,
legend.title = "", gp = NULL)
{
if (class(df) != "data.frame") {
stop("The function must apply to a data frame.\n")
}
ind &lt;- colnames(df) %in% c("x", "y", columns)
if (sum(ind) != (length(columns) + 2)) {
stop("The input data frame must contain columns 'x', 'y' and those in
columns provided.\n")
}
df_sub &lt;- df[, ind]
df_sub &lt;- df_sub[!duplicated(df_sub), ]
df_sub &lt;- df_sub[apply(df_sub[, c(-1, -2)], 1, sum) != 0,
]
geom_pie &lt;- function(mapping = NULL, data, columns, ...) {
if (is.null(mapping)) {
mapping &lt;- ggplot2::aes_(x = ~x, y = ~y)
}
mapping &lt;- utils::modifyList(mapping, ggplot2::aes_(r0 = 0,
fill = ~type, amount = ~value))
if (!("r" %in% names(mapping))) {
xvar &lt;- "x"
tmp &lt;- base::diff(range(data[, xvar]))
if (tmp == 0) {
tmp &lt;- 1
}
size &lt;- tmp/75
mapping &lt;- utils::modifyList(mapping, aes_(r = size))
}
names(mapping)[match(c("x", "y"), names(mapping))] &lt;- c("x0",
"y0")
df &lt;- tidyr::gather(data, "type", "value", columns, factor_key = TRUE)
ggforce::geom_arc_bar(mapping, data = df, stat = "pie",
inherit.aes = FALSE, ...)
}
x &lt;- y &lt;- NULL
if (all(class(gp) %in% c("gg", "ggplot"))) {
gp &lt;- gp
}
else {
gp &lt;- ggplot()
}
if (is.null(pie.radius)) {
gp &lt;- gp + geom_pie(data = df_sub, aes(x = x, y = y),
columns = columns, show.legend = TRUE, color = pie.color,
alpha = pie.color.alpha, size = pie.thick)
}
else {
df_sub$pie.radius &lt;- rep(pie.radius, nrow(df_sub))
gp &lt;- gp + geom_pie(data = df_sub, aes(x = x, y = y,
r = pie.radius), columns = columns, show.legend = TRUE,
color = pie.color, alpha = pie.color.alpha, size = pie.thick)
}
gp &lt;- gp + coord_equal() + guides(fill = guide_legend(title =
legend.title,
title.position = "top", keywidth = 0.6, keyheight = 0.6,
override.aes = list(shape = 19)))
my_colors &lt;- xColormap(colormap)(length(columns))
names(my_colors) &lt;- columns
gp &lt;- gp + scale_fill_manual(values = my_colors)
invisible(gp)
}
</pre>


</body></html>
